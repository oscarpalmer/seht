function a(t,e){if(t instanceof Node)return[t].filter(c).filter(l);if(Array.isArray(t))return t.filter(c).filter(l);if(t instanceof NodeList)return Array.from(t).filter(c).filter(l);if(typeof t!="string")return[];let n=e==null?[globalThis.document]:a(e),r=[];for(let o of n){let i=Array.from(o.querySelectorAll(t));r.push(...i)}return r.filter(c).filter(l)}function c(t){return t.nodeType===1||t.nodeType>8}function l(t,e,n){return n.indexOf(t)===e}function p(t,e){let n=u(e);for(let r of n)for(let o of t)typeof r=="string"?o.dispatchEvent(new Event(r)):o.dispatchEvent(new CustomEvent(r.name,{detail:r.data}));return null}var f=class{constructor(e){this.seht=e}add(e){return m(this.seht.elements,e,!0)??this.seht}dispatch(e){return p(this.seht.elements,e)??this.seht}remove(e){return m(this.seht.elements,e,!1)??this.seht}};function u(t){if(typeof t=="string")return[t];if(typeof t!="object")return[];if(!Array.isArray(t))return typeof t.name=="string"?[t]:[];let e=[];for(let n of t)typeof n=="string"&&e.push(n),typeof n=="object"&&typeof n.name=="string"&&e.push(n);return e}function h(t){let e=[];if(typeof t!="object")return e;for(let n in t){let{listener:r,options:o}=t[n]??{};typeof r=="function"&&e.push({listener:r,name:n,options:o})}return e}function m(t,e,n){let r=n?"addEventListener":"removeEventListener",o=h(e);for(let i of o)for(let d of t)d[r](i.name,i.listener,i.options);return null}var s=class{elements;get events(){return new f(this)}constructor(e,n){this.elements=a(e,n)}each(e){for(let n of this.elements)e.call(this,n,this.elements.indexOf(n),this.elements);return this}filter(e){return new s(this.elements.filter(e))}map(e){return new s(this.elements.map(e))}};function x(t,e){return new s(t,e)}export{x as $,s as Seht};
