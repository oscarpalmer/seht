function p(t){return`data-${t.replace(/^data-/i,"")}`}function g(t,e){let n=t?.getAttribute(p(e));return n==null?n:JSON.parse(n)}function E(t,e){let n=[];if(typeof t!="object"||Array.isArray(t))return n;for(let r in t){let s=e?p(r):r,i=t[r]==null?null:e?JSON.stringify(t[r]):String(t[r]);n.push({name:s,value:i})}return n}function m(t,e){if(t instanceof Node)return[t].filter(l).filter(c);if(Array.isArray(t))return t.filter(l).filter(c);if(t instanceof NodeList)return Array.from(t).filter(l).filter(c);if(typeof t!="string")return[];let n=e==null?[globalThis.document]:m(e),r=[];for(let s of n){let i=Array.from(s.querySelectorAll(t));r.push(...i)}return r.filter(l).filter(c)}function l(t){return t.nodeType===1||t.nodeType>8}function y(t,e,n){let r=E(e,n);for(let s of r){let{name:i,value:a}=s;for(let h of t)a==null?h.removeAttribute(i):h.setAttribute(i,a)}return null}function c(t,e,n){return n.indexOf(t)===e}var u=class{constructor(e){this.seht=e}get(e){return this.seht.elements[0]?.getAttribute(e)??void 0}set(e){return y(this.seht.elements,e,!1)??this.seht}},f=class{constructor(e){this.seht=e}get(e){return g(this.seht.elements[0],e)}set(e){return y(this.seht.elements,e,!0)??this.seht}};function v(t,e){let n=A(e);for(let r of n)for(let s of t)typeof r=="string"?s.dispatchEvent(new Event(r)):s.dispatchEvent(new CustomEvent(r.name,{detail:r.data}));return null}function A(t){if(typeof t=="string")return[t];if(typeof t!="object")return[];if(!Array.isArray(t))return typeof t.name=="string"?[t]:[];let e=[];for(let n of t)typeof n=="string"&&e.push(n),typeof n=="object"&&typeof n.name=="string"&&e.push(n);return e}function O(t){let e=[];if(typeof t!="object"||Array.isArray(t))return e;for(let n in t){let{listener:r,options:s}=t[n]??{};typeof r=="function"&&e.push({listener:r,name:n,options:s})}return e}function b(t,e,n){let r=n?"addEventListener":"removeEventListener",s=O(e);for(let i of s)for(let a of t)a[r](i.name,i.listener,i.options);return null}var d=class{constructor(e){this.seht=e}add(e){return b(this.seht.elements,e,!0)??this.seht}dispatch(e){return v(this.seht.elements,e)??this.seht}remove(e){return b(this.seht.elements,e,!1)??this.seht}};var o=class{elements;get attributes(){return new u(this)}get data(){return new f(this)}get events(){return new d(this)}constructor(e,n){this.elements=m(e,n)}each(e){for(let n of this.elements)e.call(this,n,this.elements.indexOf(n),this.elements);return this}filter(e){return new o(this.elements.filter(e))}map(e){return new o(this.elements.map(e))}};function H(t,e){return new o(t,e)}export{H as $,o as Seht};
